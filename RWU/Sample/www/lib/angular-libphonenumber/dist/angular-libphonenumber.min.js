/**
 * angular-libphonenumber
 * Nathan Hammond's libphonenumber ported to an angular filter
 * @version v1.0.0
 * @link https://github.com/cwill747/angular-libphonenumber
 * @license Apache-2.0
 */
!function(e){e.module("cwill747.phonenumber",[]).directive("phoneNumber",["$log",function(e){function t(e){return e?e.replace(/([^0-9|+])/g,""):e}function n(t,n){var r=t;try{r=phoneUtils.formatAsTyped(t,n)}catch(o){e.debug(o)}return r}return{restrict:"A",require:"?ngModel",scope:{countryCode:"=",nonFormatted:"=?"},controllerAs:"",controller:function(){this.countryCode=this.countryCode||"us"},link:function(r,o,u,i){function l(e){return i.$isEmpty(e)?e:n(t(e),r.countryCode)}function c(e){if(i.$isEmpty(e))return r.nonFormatted="",e;var n=a(e);if(n===e)return e;var o=h.selectionStart,u=h.selectionEnd+n.length-e.length;return e.length<n.length&&(o+=n.length-e.length),e.length>n.length+1&&(o-=n.length-e.length),i.$setViewValue(n),i.$render(),h.setSelectionRange(o,u),t(n)}function a(e){var o=t(e);r.nonFormatted=o;var u="";return u=o&&o.length>1?n(o,r.countryCode):o,u.trim()}function s(t){var n=!1;try{n=phoneUtils.isValidNumberForRegion(t,r.countryCode)}catch(o){e.debug(o)}var u=i.$isEmpty(t)||n;return i.$setValidity("phoneNumber",u),t}var h=o[0];r.$watch("countryCode",function(){i.$modelValue=i.$viewValue+" "}),i.$formatters.push(l),i.$formatters.push(s),i.$parsers.push(c),i.$parsers.push(s)}}}])}(angular);